{% extends 'base.html' %}
{% block title %}Edit Client â€” HR Logbook{% endblock %}

{% block content %}
<div class="card shadow-sm mx-auto" style="max-width:760px;">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0"><i class="fas fa-edit"></i> Edit Client</h5>
  </div>
            <div class="card-body">
                <form method="post">
                    <input class="form-control" type="hidden" name="client_id" value="{{ client.client_id }}" required>
                    <div class="mb-3">
                        <label class="form-label"><i class="fas fa-user"></i> Full Name</label>
                        <input class="form-control" type="text" name="full_name" value="{{ client.full_name }}"
                            required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label"><i class="fas fa-building"></i> Department</label>
                        <input class="form-control" type="text" name="department" value="{{ client.department }}">
                    </div>
                    <div class="mb-3">
                        <label class="form-label"><i class="fas fa-tags"></i> Client Type</label>
                        <select class="form-select" name="client_type">
                            <option value="" {% if not client.client_type %}selected{% endif %}>Select</option>
                            <option value="EMPLOYEE" {% if client.client_type=='EMPLOYEE' %}selected{% endif %}>EMPLOYEE
                            </option>
                            <option value="STUDENT" {% if client.client_type=='STUDENT' %}selected{% endif %}>STUDENT
                            </option>
                            <option value="APPLICANT" {% if client.client_type=='APPLICANT' %}selected{% endif %}>
                                APPLICANT</option>
                            <option value="VISITOR" {% if client.client_type=='VISITOR' %}selected{% endif %}>VISITOR
                            </option>
                            <option value="OTHER" {% if client.client_type=='OTHER' %}selected{% endif %}>OTHER</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label"><i class="fas fa-venus-mars"></i> Gender</label>
                        <select class="form-select" name="gender">
                            <option value="" {% if not client.gender %}selected{% endif %}>Select</option>
                            <option value="MALE" {% if client.gender=='MALE' %}selected{% endif %}>Male</option>
                            <option value="FEMALE" {% if client.gender=='FEMALE' %}selected{% endif %}>Female</option>
                            <option value="OTHER" {% if client.gender=='OTHER' %}selected{% endif %}>Other</option>
                            <option value="PREFER_NOT_TO_SAY" {% if client.gender=='PREFER_NOT_TO_SAY' %}selected{% endif %}>Prefer not to say</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label"><i class="fas fa-birthday-cake"></i> Age</label>
                        <input class="form-control" type="number" name="age" value="{{ client.age or '' }}" min="0"
                            max="150">
                    </div>
                    <div class="d-flex gap-2 justify-content-end">
                        <button class="btn btn-success" type="submit"><i class="fas fa-save"></i> Update</button>
                        <a class="btn btn-outline-secondary" href="/clients"><i class="fas fa-arrow-left"></i> Back</a>
                    </div>
                </form>
            </div>
        </div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Check if success=1 is in the URL
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('success') === '1') {
        // Show the success modal
        const successModal = new bootstrap.Modal(document.getElementById('successModal'));
        document.getElementById('successMessage').textContent = 'Client record updated successfully!';
        successModal.show();
    }
});
</script>
{% endblock %}
