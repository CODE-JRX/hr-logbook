{% for form in csm_forms %}
<div class="form-page">
    <div class="container">
        <div class="control-no">CONTROL NO. {{ form.control_no }}</div>

        <div class="header">
            <div class="institute-name">ABRA STATE INSTITUTE OF SCIENCES AND TECHNOLOGY</div>
            <div class="campus">Main Campus, Lagangliang, Abra</div>
            <div class="form-title">Client Satisfaction Measurement Form</div>
            <div class="subtitle">HELP US SERVE YOU BETTER!!!</div>
        </div>

        <div class="intro">
            This Client Satisfaction Measurement (CSM) tracks the customer experience of government offices.
            Your feedback on your recently concluded transaction will help this office provide a better service.
            Personal information shared will be kept confidential and you always have the option to not answer this
            form.
        </div>

        <form>
            <!-- Client Information Section -->
            <div class="section">
                <div class="section-title">Human Resources Management Unit</div>

                <div class="form-row">
                    <div class="form-field print-field-label">
                        DATE: {{ form.date }}
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-field">
                        <label class="required">CLIENT TYPE:</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio"
                                    id="citizen_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="client_type_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="Citizen" {% if form.client_type=='Citizen' %}checked{% endif %}>
                                <label
                                    for="citizen_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    style="margin-bottom: 0;">Citizen</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="business_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="client_type_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="Business" {% if form.client_type=='Business' %}checked{% endif %}>
                                <label
                                    for="business_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    style="margin-bottom: 0;">Business</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="employee_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="client_type_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="Employee" {% if form.client_type=='Employee' %}checked{% endif %}>
                                <label
                                    for="employee_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    style="margin-bottom: 0;">Employee or Another
                                    Agency</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-field sex-field">
                        <label class="required">SEX:</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio"
                                    id="male_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="sex_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="Male" {% if form.sex and form.sex|lower=='male' %}checked{% endif %}>
                                <label
                                    for="male_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    style="margin-bottom: 0;">Male</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="female_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="sex_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="Female" {% if form.sex and form.sex|lower=='female' %}checked{% endif %}>
                                <label
                                    for="female_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    style="margin-bottom: 0;">Female</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-field age-field">
                        AGE: {{ form.age or '' }}
                    </div>

                    <div class="form-field region-field">
                        REGION OF RESIDENCE: {{ form.region_of_residence or '' }}
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-field">
                        Email Address (optional): {{ form.email or '' }}
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-field">
                        <label class="required">SERVICE AVAILED:</label>
                        <div class="checkbox-group">
                            {% set service_list = form.service_availed.split(', ') if form.service_availed else []
                            %}
                            <div class="checkbox-option">
                                <input type="checkbox"
                                    id="service1_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="service_availed_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="Releasing of Document Requested" {% if 'Releasing of Document Requested' in
                                    service_list %}checked{% endif %}>
                                <label
                                    for="service1_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">Releasing
                                    of Document Requested</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox"
                                    id="service2_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="service_availed_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="Submission of Documents" {% if 'Submission of Documents' in service_list
                                    %}checked{% endif %}>
                                <label
                                    for="service2_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">Submission
                                    of Documents</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox"
                                    id="service3_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="service_availed_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="Request of Forms" {% if 'Request of Forms' in service_list %}checked{% endif
                                    %}>
                                <label
                                    for="service3_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">Request
                                    of Forms</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox"
                                    id="service4_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="service_availed_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="Processing of Appointments" {% if 'Processing of Appointments' in
                                    service_list %}checked{% endif %}>
                                <label
                                    for="service4_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">Processing
                                    of Appointments</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox"
                                    id="service5_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="service_availed_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="Inquiry" {% if 'Inquiry' in service_list %}checked{% endif %}>
                                <label
                                    for="service5_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">Inquiry</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox"
                                    id="service6_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="service_availed_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="Others" {% if 'Others' in service_list or form.other_service %}checked{%
                                    endif %}>
                                <label
                                    for="service6_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">OTHERS</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Citizen's Charter Questions -->
                <div class="section">
                    <div class="section-title">Citizen's Charter Questions</div>

                    <div class="instructions">
                        INSTRUCTIONS: Check mark (✓) your answer to the Citizen's Charter (CC) questions.
                        The Citizen's Charter is an official document that reflects the services of a government
                        agency/office
                        including its requirements, fees, and processing times among others.
                    </div>

                    <div class="form-field">
                        <label class="required">CC1. Which of the following best describes your awareness
                            of a CC?</label>
                        <div class="radio-group" style="flex-direction: column; gap: 8px;">
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc1_1_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="awareness_of_cc_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="1" {% if form.awareness_of_cc==1 %}checked{% endif %}>
                                <label
                                    for="cc1_1_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">1.
                                    I know what a CC is and I saw this office's
                                    CC.</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc1_2_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="awareness_of_cc_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="2" {% if form.awareness_of_cc==2 %}checked{% endif %}>
                                <label
                                    for="cc1_2_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">2.
                                    I know what a CC is but I did NOT see this
                                    office's CC.</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc1_3_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="awareness_of_cc_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="3" {% if form.awareness_of_cc==3 %}checked{% endif %}>
                                <label
                                    for="cc1_3_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">3.
                                    I learned of the CC only when I saw this
                                    office's CC.</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc1_4_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="awareness_of_cc_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="4" {% if form.awareness_of_cc==4 %}checked{% endif %}>
                                <label
                                    for="cc1_4_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">4.
                                    I do not know what a CC is and I did not see
                                    one in this office. (Answer 'N/A' on CC2 and CC3)</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-field">
                        <label class="required">CC2. If aware of CC (answered 1-3 in CC1), would you say
                            that the CC of this office was ...?</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc2_1_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="cc_of_this_office_was_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="1" {% if form.cc_of_this_office_was==1 %}checked{% endif %}>
                                <label
                                    for="cc2_1_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">1.
                                    easy to see</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc2_2_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="cc_of_this_office_was_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="2" {% if form.cc_of_this_office_was==2 %}checked{% endif %}>
                                <label
                                    for="cc2_2_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">2.
                                    somewhat easy to see</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc2_3_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="cc_of_this_office_was_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="3" {% if form.cc_of_this_office_was==3 %}checked{% endif %}>
                                <label
                                    for="cc2_3_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">3.
                                    difficult to see</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc2_4_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="cc_of_this_office_was_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="4" {% if form.cc_of_this_office_was==4 %}checked{% endif %}>
                                <label
                                    for="cc2_4_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">4.
                                    not visible at all</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc2_5_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="cc_of_this_office_was_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="5" {% if form.cc_of_this_office_was==5 %}checked{% endif %}>
                                <label
                                    for="cc2_5_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">5.
                                    N/A</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-field">
                        <label class="required">CC3. If aware of CC (answered codes 1-3 in CC1), how much
                            did the CC help you in your transaction?</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc3_1_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="cc_help_you_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="1" {% if form.cc_help_you==1 %}checked{% endif %}>
                                <label
                                    for="cc3_1_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">1.
                                    helped very much</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc3_2_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="cc_help_you_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="2" {% if form.cc_help_you==2 %}checked{% endif %}>
                                <label
                                    for="cc3_2_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">2.
                                    somewhat helped</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc3_3_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="cc_help_you_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="3" {% if form.cc_help_you==3 %}checked{% endif %}>
                                <label
                                    for="cc3_3_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">3.
                                    did not help</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio"
                                    id="cc3_4_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    name="cc_help_you_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                    value="4" {% if form.cc_help_you==4 %}checked{% endif %}>
                                <label
                                    for="cc3_4_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">4.
                                    N/A</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SQD Questions -->
                <div class="section">
                    <div class="section-title">Service Quality Dimensions (SQD) Questions</div>

                    <div class="instructions">
                        INSTRUCTIONS: For SQD 0-8, please <strong>PUT A CHECK MARK (✓)</strong> on the column that
                        best corresponds to your answer.
                    </div>

                    <table>
                        <thead>
                            <tr>
                                <th style="width: 40%;">Question</th>
                                <th class="checkbox-cell">Strongly Disagree</th>
                                <th class="checkbox-cell">Disagree</th>
                                <th class="checkbox-cell">Neither Agree or Disagree</th>
                                <th class="checkbox-cell">Agree</th>
                                <th class="checkbox-cell">Strongly Agree</th>
                                <th class="checkbox-cell">NOT Applicable</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% set sdq_labels = [
                            'SQD 0. I am satisfied with the service that I availed.',
                            'SQD 1. I spent a reasonable amount of time for my transaction.',
                            'SQD 2. The office followed the transaction\'s requirements and steps based on the
                            information provided.',
                            'SQD 3. The steps (including payment) I needed to do for my transaction were easy and
                            simple.',
                            'SQD 4. I easily found information about my transaction from the office or its
                            website.',
                            'SQD 5. I paid a reasonable amount of fees for my transaction.',
                            'SQD 6. I feel the office was fair to everyone, or "walang palakasan", during my
                            transaction.',
                            'SQD 7. I was treated courteously by the staff, and (if asked for help) the staff was
                            helpful.',
                            'SQD 8. I got what I needed from the government office, or (if denied) denial of request
                            was sufficiently explained to me.'
                            ] %}
                            {% set sdq_values = [form.sdq0, form.sdq1, form.sdq2, form.sdq3, form.sdq4, form.sdq5,
                            form.sdq6, form.sdq7, form.sdq8] %}

                            {% for idx in range(sdq_labels|length) %}
                            <tr>
                                <td class="sqd-question">{{ sdq_labels[idx] }}</td>
                                {% for val in range(1, 7) %}
                                <td class="checkbox-cell">
                                    <input type="radio"
                                        name="sdq{{ idx }}_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                                        value="{{ val }}" {% if sdq_values[idx]==val %}checked{% endif %}>
                                </td>
                                {% endfor %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <!-- Suggestions Section -->
                <div class="section">
                    <div class="form-field">
                        <label
                            for="suggestions_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}">Suggestions
                            on how we can further improve our
                            services (optional):</label>
                        <textarea
                            id="suggestions_{{ loop.index }}_{{ loop.parent.index if loop.parent is defined else 0 }}"
                            name="suggestion">{{ form.suggestion or '' }}</textarea>
                    </div>
                </div>

                <div class="footer-note">
                    © 2026 HRMO Logbook
                </div>
        </form>
    </div>
</div>
{% endfor %}
{% if not csm_forms %}
<div class="results-card" style="text-align: center; color: #999; padding: 40px; background: white !important;">
    <p>No CSM records found matching the filters. Nothing to print.</p>
</div>
{% endif %}